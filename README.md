# 🎮 무혼 비동: 시련의 시작

모든 난관을 극복한 자만이 무혼을 얻을 것이다.

---

## 📱 PWA (Progressive Web App)

이 게임은 PWA로 제작되어 스마트폰 홈 화면에 설치하여 네이티브 앱처럼 사용할 수 있습니다.

### 설치 방법:

**Android (Chrome):**
1. 게임 실행
2. 메뉴(⋮) → "홈 화면에 추가"
3. 아이콘 클릭으로 전체화면 실행

**iOS (Safari):**
1. 게임 실행
2. 공유 버튼 → "홈 화면에 추가"
3. 아이콘 클릭으로 전체화면 실행

---

## 🔄 버전 관리 및 업데이트

### 현재 버전: v1.0.1

### 자동 캐시 무효화 시스템

이 게임은 스마트한 캐시 관리 시스템을 갖추고 있습니다:

✅ **HTML 파일 자동 업데이트**
- 매번 최신 버전을 서버에서 확인
- 변경사항 즉시 반영

✅ **Service Worker 자동 업데이트**
- 1시간마다 새 버전 확인
- 업데이트 발견 시 3초 후 자동 새로고침

✅ **리소스 효율적 캐싱**
- 이미지, 폰트: 캐시 우선 + 백그라운드 업데이트
- 동영상: 네트워크 우선 (용량 고려)

### 업데이트 방법

#### 🚀 빠른 방법 (자동화 스크립트 사용):

```bash
node update-version.js 1.0.2
```

이 명령 하나로 모든 파일의 버전이 자동 업데이트됩니다!

#### ✏️ 수동 방법:

자세한 내용은 `VERSION_UPDATE_GUIDE.md` 참고

---

## 🎯 게임 특징

### 조작법:
- **화면 터치**: 상승
- **터치 해제**: 하강
- **진기 시스템**: 자동 회피 (소비형 리소스)

### 게임 플레이:
1. 4개의 난관 스테이지
2. 각 스테이지 사이 휴식 공간 (컷신 + 스토리)
3. 최종 보스 스테이지
4. 엔딩

### PWA 기능:
- ✅ 오프라인 플레이 지원
- ✅ 가로 화면 자동 전환
- ✅ 하드웨어 뒤로가기 버튼 제어
- ✅ 전체화면 모드
- ✅ 터치 최적화

---

## 📂 파일 구조

```
master_jump/
├── index.html              # 타이틀 화면
├── stage_1.html            # 제1 난관
├── stage_2.html            # 제2 난관
├── stage_3.html            # 제3 난관
├── stage_final.html        # 최종 난관
├── rest_area_1.html        # 휴식 공간 1
├── rest_area_2.html        # 휴식 공간 2
├── rest_area_3.html        # 휴식 공간 3
├── ending.html             # 엔딩
├── manifest.json           # PWA 매니페스트
├── service-worker.js       # Service Worker (캐싱 관리)
├── update-version.js       # 버전 업데이트 자동화 스크립트
├── VERSION_UPDATE_GUIDE.md # 버전 관리 가이드
└── assets/                 # 게임 리소스
    ├── common/            # 공통 리소스
    ├── title/             # 타이틀 리소스
    ├── stage_1/           # 스테이지 1 리소스
    └── ...
```

---

## 🛠️ 개발자 도구

### 콘솔 로그 확인:

게임 실행 시 콘솔에서 다음 정보를 확인할 수 있습니다:

```
🎮 무혼 비동 v1.0.1
[PWA] Service Worker 등록 성공
[Service Worker v1.0.1] 초기화
[Video] 비디오 사전 로딩 시작
```

### 캐시 상태 확인:

```
개발자 도구 → Application → Cache Storage
→ muhon-bidong-v1.0.1
```

### Service Worker 상태 확인:

```
개발자 도구 → Application → Service Workers
```

---

## 🐛 문제 해결

### 업데이트가 적용되지 않는 경우:

1. **Service Worker 재등록:**
   - 개발자 도구 → Application → Service Workers → Unregister
   - 페이지 새로고침

2. **캐시 완전 삭제:**
   - 개발자 도구 → Application → Storage → Clear site data
   - 페이지 새로고침

3. **브라우저 하드 리프레시:**
   - PC: `Ctrl + Shift + R`
   - 모바일: 브라우저 설정 → 캐시 삭제

### 게임이 시작되지 않는 경우:

- 콘솔 로그 확인
- 비디오 파일 로딩 상태 확인
- 네트워크 연결 확인

---

## 📝 버전 히스토리

### v1.0.1 (2024-02-07)
- ✨ PWA 자동 캐시 무효화 시스템 구축
- 🎬 비디오 로딩 안정성 개선 (타임아웃 및 에러 핸들링)
- 📱 하드웨어 뒤로가기 버튼 커스텀 팝업 추가
- 🔄 화면 방향 강제 고정 기능 강화
- 🛠️ 버전 자동 업데이트 스크립트 추가

### v1.0.0 (초기 릴리즈)
- 🎮 기본 게임 구현
- 📱 모바일 터치 지원
- 📺 반응형 화면 대응 (16:9)
- 🎵 BGM 및 효과음
- 🎬 컷신 및 스토리

---

## 📄 라이선스

이 게임의 모든 권리는 제작자에게 있습니다.

---

## 💡 개발 팁

### 개발 모드 테스트:
- 브라우저 개발자 도구에서 "Disable cache" 체크
- 시크릿/프라이빗 모드로 캐시 없이 테스트

### 배포 전 체크리스트:
- [ ] 버전 번호 업데이트
- [ ] 모든 파일 서버 업로드
- [ ] PC 브라우저 테스트
- [ ] Android 테스트
- [ ] iOS Safari 테스트
- [ ] 오프라인 모드 테스트

---

**🎮 즐거운 게임 되세요!**
